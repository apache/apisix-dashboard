log_format  main  '$remote_addr - $remote_user [$time_local] $request "$status" $body_bytes_sent "$http_referer" "$http_user_agent" "$http_x_forwarded_for" "$request_time" "$upstream_response_time" ';

lua_package_path "/usr/local/openresty/nginx/conf/lua/?.lua;;";

server {
    listen       80;
    server_name  localhost;

    access_log  off;

    location / {
        default_type text/html;
        content_by_lua_block {
            ngx.say(ngx.var.uri)
        }
    }
}

    server {
        listen 1980;
        listen 1981;
        listen 1982;
        listen 5044;

        
        server_tokens off;

        location / {
            content_by_lua_block {
                require("server").go()
            }

            more_clear_headers Date;
        }
    }

    server {
        listen 1983 ssl;
        ssl_certificate             cert/apisix.crt;
        ssl_certificate_key         cert/apisix.key;
        lua_ssl_trusted_certificate cert/apisix.crt;

        server_tokens off;

        location / {
            content_by_lua_block {
                require("server").go()
            }

            more_clear_headers Date;
        }
    }



