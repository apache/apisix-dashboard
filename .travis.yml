language: node_js
node_js:
- '8'
install:
- npm install
after_success:
- cd ./dist
- git init
- git config --global user.name ${GIT_USER}
- git config --global user.email ${GIT_MAIL}
- git remote set-url --push origin https://github.com/iresty/apisix_dashboard_built.git
- git pull
- npm run build:prod
- git add *
- git commit -m "Automatically update from travis-ci"
- git push -f "https://${GH_USER}:${GH_PWD}@github.com/iresty/apisix_dashboard_built.git" master:master
branches:
  only:
  - master
notifications:
  email:
  - "${GIT_MAIL}"
